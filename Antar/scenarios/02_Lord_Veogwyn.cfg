#textdomain wesnoth-Antar

#define INITIALIZE_SCENARIO_VARIABLES
	{VARIABLE village_search 0}
	{VARIABLE reinforcements 0}
	{VARIABLE gelphrad_found no}
#enddef

#define CLEAR_SCENARIO_VARIABLES
	{CLEAR_VARIABLE village_search}        ###for little surprises when capture
	{CLEAR_VARIABLE side_3_villages}       ###change_village_owner_after_victory
	{CLEAR_VARIABLE reinforcements}        ###reinforcements only one ime
	{CLEAR_VARIABLE distance}              ###nearest_unit
	{CLEAR_VARIABLE unit_found}            ###nearest_unit
	{CLEAR_VARIABLE undead_villages} 
	{CLEAR_VARIABLE gelphrad_found}
	{CLEAR_VARIABLE nearest_human1}
	{CLEAR_VARIABLE check_speaker}         ###check if speaker is Gelphrad or not
#enddef

#define FIRE_GELPHRAD
		[unit]
			type=Gelphrad_ruffian
			id="Gelphrad"
			name="Gelphrad"
			unrenamable=yes
			x=$x1
			y=$y1
			find_vacant=yes
			side=2
			random_traits=no
			[modifications]
				{TRAIT_RESILIENT}
				{TRAIT_STRONG}
			[/modifications]
		[/unit]
		[message]
			speaker="Gelphrad"
			message= _ "You won't get me ... huh, humans! You are not under Lord Veogwyns command."
		[/message]
		[message]
			speaker=unit
			message= _ "No, Lord Antar is our souvereign."
		[/message]
		[if]
			[variable]
				name=unit.id
				equals=Dagor
			[/variable]
			[then]
				[message]
					speaker="Gelphrad"
					message= _ "Are you a mage?"
				[/message]
			[/then]
		[/if]
		[message]
			speaker="Dagor"
			message= _ "This boy is unlike... I can sense a kind of magic in this man-child and the magic... not skilled... but it is extraordinary strong."
		[/message]
		[message]
			speaker="Dagor"
			message= _ "Come with me as my apprentice. I'll teach you, and you will become a great magician, of that I am certain."
		[/message]
		[message]
			speaker="Antar"
			message= _ "Mages are rare these days, we have to save the life of this young man."
		[/message]

		[objectives]
			side=1
			[objective]
				description=_ "Save Lord Veogwyn and"
				condition=win
			[/objective]
			[objective]
				description=_ "Save Gelphrads life and"
				condition=win
			[/objective]
			[objective]
				description=_ "Defeat Enemy Leader"
				condition=win
			[/objective]
			[objective]
				description=_ "Death of Antar"
				condition=lose
			[/objective]
			[objective]
				description=_ "Death of Dagor"
				condition=lose
			[/objective]
			[objective]
				description=_ "Death of Gelphrad"
				condition=lose
			[/objective]
			[objective]
				description=_ "Death of Lord Veogwyn"
				condition=lose
			[/objective]            
			[objective]
				description=_ "Turns run out"
				condition=lose
			[/objective]

			note={EARLY_FINISH_BONUS_NOTE}+{NEW_GOLD_CARRYOVER_NOTE_40}
		[/objectives]

		{MODIFY_UNIT (id=Gelphrad) side 1}
		{MAKE_HERO (Gelphrad) }
		{VARIABLE_OP gelphrad_found value yes}
#enddef










[scenario]
	id="Lord_Veogwyn"
	name= _ "Lord Veogwyn"
	map_data="{~add-ons/Antar/maps/02_Lord_Veogwyn.map}"

	{TURNS 27 25 23}

	victory_when_enemies_defeated="no"

	{DEFAULT_SCHEDULE}

	next_scenario="Lord_Othar"

	{MOOD_BATTLE}

	[side]
		type=Antar_Fencer
		id="Antar"
		name= _ "Antar"
		side=1
		canrecruit=yes
		controller=human
		recruit= Sergeant, Spearman, Bowman, Horseman,Cavalryman
		team_name=Antar
		user_team_name=_ "Antar"
		gold=150
		shroud=no
		fog=yes
		{FLAG_VARIANT loyalist}
	[/side]

	{STARTING_VILLAGES 1 1}


	[side]
		type=General
		id=Lord Veogwyn
		name= _ "Lord Veogwyn"
		profile="portraits/humans/marshal.png"
		side=2
		color=black
		canrecruit=yes
		facing=sw
		controller=ai
		persistent=yes
		save_id=Lord Veogwyn_Side
		recruit= Spearman, Bowman, Horseman, Sergeant, Heavy Infantryman, Cavalryman
		[ai]
			aggression=0,25
			village_value=1
			caution=0.75
			passive_leader=yes
			[avoid]
				terrain=W*,S*,M*,Dd,Wwg,Wo,WwÊwl,WwÊwf,Wwg,Sm,Ss
			[/avoid]
			[protect_location]
				x,y=32,4
				radius=10
				value=5
			[/protect_location]
		[/ai]
		team_name=Antar
		user_team_name=_ "Good Guys"
		shroud=no
		fog=yes
		gold=100
		{FLAG_VARIANT loyalist}
	[/side]

	{STARTING_VILLAGES 2 7}


	[side]
		type=Death Knight
		id=Hadrador
		name= _ "Hadrador"
		side=3
		color=purple
		facing=sw
		canrecruit=yes
		controller=ai
		[ai]
			aggression=0.75
			caution=0.25
			village_value=0.5
			leader_value=1.0
			passive_leader=yes
			{ATTACK_DEPTH 3 4 5}
		[/ai]
		recruit= Walking Corpse, Soulless
		team_name=Mal Kazur
		user_team_name=_"Bad Guys"
		shroud=no
		fog=yes
		{FLAG_VARIANT ragged}
		{GOLD 180 190 200}
		{INCOME 3 4 5}
	[/side]

	{STARTING_VILLAGES 3 21}
	{FLAG_VARIANT ragged}

	{LR_LIMIT_CONTEMPORANEOUS_RECRUITS_DIFFICULTY_DEPENDANT 3 (Soulless) 3 4 5}


	[side]
		side=4
		color=purple
		hidden=yes
		controller=ai
		no_leader=yes
		[ai]
			aggression=1.0
			caution=0.0
			village_value=0.5
			leader_value=1.0
			{ATTACK_DEPTH 3 4 5}
		[/ai]
		recruit= Skeleton, Skeleton Archer, Dark Adept, Walking Corpse, Soulless
		team_name=Mal Kazur
		user_team_name=_"Bad Guys"
		gold=100
		shroud=no
		fog=no
		{FLAG_VARIANT ragged}
	[/side]

	{STORY_LORD_VEOGWYN}










	[event]
		name=prestart

		[hide_unit]
			id=Antar
		[/hide_unit]
		[capture_village] 
			x,y=15,4
			side=2
		[/capture_village] 
		[capture_village] 
			x,y=19,1
			side=2
		[/capture_village] 
		[capture_village] 
			x,y=21,1
			side=2
		[/capture_village] 
		[capture_village] 
			x,y=36,13
			side=2
		[/capture_village]

		[store_villages] 
			ownwer_side=3
			[not]
				owner_side=0
			[/not]
			[not]
				owner_side=1
			[/not]
			[not]
				owner_side=2
			[/not]
			variable=undead_villages
		[/store_villages] 

		{LR_GENERIC_GUARD_UNIT 2       (Spearman)          22  8}
		{LR_GENERIC_UNIT       2       (Heavy Infantryman) 23  9}
		{LR_GENERIC_GUARD_UNIT 2       (Bowman)            24  9}
		{LR_GENERIC_UNIT       2       (Spearman)          28  8}
		{LR_GENERIC_UNIT       2       (Bowman)            28  7}
		{LR_GENERIC_GUARD_UNIT 2       (Spearman)          29  6}
		{LR_GENERIC_GUARD_UNIT 2       (Swordsman)         29  5}
		{LR_GENERIC_GUARD_UNIT 2       (Bowman)            30  6}
		{LR_GENERIC_UNIT       2       (Spearman)          37  5}
		{LR_GENERIC_GUARD_UNIT 2       (Swordsman)         32  3}

		{LR_GENERIC_UNIT       3       (Skeleton)          22  9}
		{LR_GENERIC_UNIT       3       (Skeleton Archer)   21 10}
		{LR_GENERIC_GUARD_UNIT 3       (Skeleton)          20 10}
		{LR_GENERIC_GUARD_UNIT 3       (Skeleton Archer)   22 10}
		{LR_GENERIC_GUARD_UNIT 3       (Dark Adept)        23 10}
		{LR_GENERIC_GUARD_UNIT 3       (Walking Corpse)    27 25}             ### 19 28
		{LR_GENERIC_GUARD_UNIT 3       (Walking Corpse)    21 10}
		{LR_GENERIC_GUARD_UNIT 3       (Soulless)          23 10}
		{LR_GENERIC_GUARD_UNIT 3       (Walking Corpse)    17 13}
		{LR_GENERIC_UNIT       3       (Walking Corpse)    30 15}
		{LR_GENERIC_UNIT       3       (Skeleton Archer)   33 36}

		[objectives]
			side=1
			[objective]
				description=_ "Save Lord Veogwyn and"
				condition=win
			[/objective]
			[objective]
				description=_ "Defeat Enemy Leader"
				condition=win
			[/objective]
			[objective]
				description=_ "Death of Antar"
				condition=lose
			[/objective]
			[objective]
				description=_ "Death of Dagor"
				condition=lose
			[/objective]
			[objective]
				description=_ "Death of Lord Veogwyn"
				condition=lose
			[/objective]            
			[objective]
				description=_ "Turns run out"
				condition=lose
			[/objective]

			note={EARLY_FINISH_BONUS_NOTE}+{NEW_GOLD_CARRYOVER_NOTE_40}
		[/objectives]

		{INITIALIZE_SCENARIO_VARIABLES}
	[/event]

	[event]
		name=start

		[role]
			role=horseman
			type=Knight,Paladin,Dragoon,Horseman
			side=1
		[/role]
		[recall]
			role=horseman
			x,y=4,37
		[/recall]
		{MOVE_UNIT (role=horseman) 6 32}
		[sound]
			name=horse-canter.wav
		[/sound]
		[redraw]
			side=1
		[/redraw]
		[delay]
			time=300
		[/delay]
		[role]
			role=dragoon
			type=Cavalier,Dragoon,Cavalryman
			side=1
		[/role]
		[recall]
			role=dragoon
			x,y=4,37
		[/recall]
		{MOVE_UNIT (role=dragoon) 5 33}
		[sound]
			name=horse-canter.wav
		[/sound]
		[redraw]
			side=1
		[/redraw]
		[delay]
			time=200
		[/delay]
		[unhide_unit]
			id=Antar
		[/unhide_unit]
		{MOVE_UNIT id=Antar 6 33}
		[delay]
			time=100
		[/delay]
		[recall]
			id=Careonryn
			x,y=4,37
		[/recall]
		{MOVE_UNIT id=Careonryn 7 34}
		[delay]
			time=300
		[/delay]
		[role]
			role=spearman
			type=Royal Guard,Swordsman,Pikeman,Javelineer,Spearman
			side=1
		[/role]
		[recall]
			role=spearman
			x,y=4,37
		[/recall]
		{MOVE_UNIT (role=spearman) 5 34}
		[delay]
			time=200
		[/delay]
		[recall]
			id=Dagor
			x,y=4,37
		[/recall]
		{MOVE_UNIT id=Dagor 6 34}
		[delay]
			time=200
		[/delay]
		[recall]
			[filter_wml]
				upkeep="loyal"
			[/filter_wml]
			x,y=4,37
		[/recall]
		{MOVE_UNIT (x,y=4,37) 7 35}
		[delay]
			time=50
		[/delay]
		[recall]
			[filter_wml]
				upkeep="loyal"
			[/filter_wml]
			x,y=4,37
		[/recall]
		{MOVE_UNIT (x,y=4,37) 5 36}
		[delay]
			time=50
		[/delay]
		[recall]
			[filter_wml]
				upkeep="loyal"
			[/filter_wml]
			x,y=4,37
		[/recall]
		{MOVE_UNIT (x,y=4,37) 6 34}
		[delay]
			time=250
		[/delay]
		[role]
			role=bowman
			type=Master Bowman,Longbowman,Bowman
			side=1
		[/role]
		[recall]
			role=bowman
			x,y=4,37
		[/recall]
		{MOVE_UNIT (role=bowman) 6 35}
		[message]
			speaker="Antar"
			message= _ "I hope we are not to late."
		[/message]
		[delay]
			time=800
		[/delay]
	[/event]


	[event]
		name=turn 4

		[allow_recruit]
			side=3
			type=Skeleton, Skeleton Archer, Dark Adept
		[/allow_recruit]
	[/event] 

	[event]
		name=turn 5

		[disallow_recruit]
			side=3
			type=Skeleton, Skeleton Archer, Dark Adept
		[/disallow_recruit]
	[/event]

	[event]
		name=turn 7

		[allow_recruit]
			side=3
			type=Skeleton, Skeleton Archer, Dark Adept
		[/allow_recruit]
	[/event]


		#####################################################
		### Antar meets the first of lord veogwyns troops ###
		#####################################################

	{ON_SIGHTING (lord_veogwyns_troops) 1
		(side=2)(
		[scroll_to_unit]
			id=$second_unit.id
		[/scroll_to_unit]
		[delay]
			time=800
		[/delay]
		[message]
			speaker=second_unit
			message= _ "Looks like we will get help!"
		[/message]
		[store_unit]
			[filter]
				x,y=$x1,$y1
			[/filter]
			variable=check_speaker
			kill=no
		[/store_unit]
		[unstore_unit]
			variable=check_speaker
		[/unstore_unit]
		[if]
			[variable]
				name=check_speaker.id
				equals="Gelphrad"
			[/variable]
			[then]
				[message]
					speaker="Antar"
					message= _ "I am Lord Antar. We are your relief!"
				[/message]
			[/then]
			[else]
				[message]
					speaker=unit
					message= _ "We are in Lord Antars service. We are your relief!"
				[/message]
			[/else]
		[/if]
		{CLEAR_VARIABLE check_speaker}
		[message]
			speaker="Antar"
			message= _ "Hang on, brave soldier! We must break the siege. Together we will defeat these abnormal warriors."
		[/message]
		[scroll_to_unit]
			id=$second_unit.id
		[/scroll_to_unit]
		[message]
			speaker=second_unit
			message= _ "You are welcome!"
		[/message]
		[delay]
			time=800
		[/delay]
		[modify_side]
			side=1,2
			fog=no
		[/modify_side]
	)}


		##################################################
		### Antar meets the first of the undead troops ###
		##################################################

	{ON_SIGHTING (undead) 1 side=3,4 (

		[message]
			speaker=unit
			message= _ "<b>Undead!</b> There they are!"
		[/message]
		[scroll_to_unit]
			x,y=$x2,$y2
		[/scroll_to_unit]
		[delay]
			time=800
		[/delay]
		)}


		###############################
		### dagor finds his student ###
		###############################

	[event]
		name=capture
		first_time_only=yes

		[filter]
			id=Dagor
		[/filter]
		[if]
			[variable]
				name=gelphrad_found
				equals=no
			[/variable]
			[then]
				{FIRE_GELPHRAD}
			[/then]
		[/if]
	[/event]


		##############################
		### village capture events ###
		##############################

	[event]
		name=moveto
		first_time_only=no

		[filter]
			side=1
			[filter_location]
				find_in=undead_villages
			[/filter_location]
		[/filter]

		{VARIABLE_OP village_search add 1}

		[if]
			[variable]
				name=village_search
				numerical_equals=3
			[/variable]
			[then]
				{LR_GENERIC_RANDOM_UNIT 4 (Walking Corpse)}
				[message]
					speaker=unit
					message= _ "A Undead!"
				[/message]
				[message]
					speaker=unit
					message= _ "Be careful, enemies may hide in the houses!"
				[/message]
			[/then]
		[/if]

		[if]
			[variable]
				name=village_search
				numerical_equals=5
			[/variable]
			[then]
				[gold]
					side=1
					amount=50
				[/gold]
				[message]
					speaker=unit
					message= _ "I found 50 pieces of gold!"
				[/message]
				[sound]
					name=gold.ogg
				[/sound]
			[/then] 
		[/if]

		[if]
			[variable]
				name=village_search
				numerical_equals=6
			[/variable]
			[then]
				{LR_GENERIC_RANDOM_UNIT 4 (Walking Corpse)}
				{LR_GENERIC_RANDOM_UNIT 4 (Walking Corpse)}
				{LR_GENERIC_RANDOM_UNIT 4 (Dark Adept)}
				[message]
					speaker=unit
					message= _ "Damn! More of them!"
				[/message]
			[/then]
		[/if]

		[if]
			[variable]
				name=village_search
				numerical_equals=8
			[/variable]
			[then]
				[if]
					[variable]
						name=gelphrad_found
						equals=no
					[/variable]
					[then]
						{FIRE_GELPHRAD}
					[/then]
				[/if]
			[/then]
		[/if]

#ifdef HARD
		[if]
			[variable]
				name=village_search
				numerical_equals=10
			[/variable]
			[then]
				{LR_GENERIC_RANDOM_UNIT 4        (Revenant)}
				{LR_GENERIC_RANDOM_UNIT 4 (Skeleton Archer)}
				{LR_GENERIC_RANDOM_UNIT 4      (Dark Adept)}
				[unit]
					type=Dark Sorcerer
					id=Hegklad
					name= _ "Hegklad"
					side=4
					canrecruit=yes
					x=$x1
					y=$y1
					find_vacant=yes
				[/unit]
				[message]
					speaker=unit
					message= _ "More Undead!"
				[/message]
			[/then]
		[/if]
#endif

		# Remove the current location from the array
		[store_locations]
			find_in=undead_villages
			[not]
				x,y=$x1,$y1
			[/not]
			variable=undead_villages
		[/store_locations]
	[/event]


		###############################################
		### Antar comes near the old ruinerd castle ###
		###############################################

	[event]
		name=moveto
		first_time_only=yes

		[filter]
			side=1
			[filter_location]
				x,y=21,25
				radius=7
			[/filter_location]
		[/filter]
		[message]
			speaker=unit
			message= _ "There is an old, ruined Castle. But it seems to be in good enough condition to recruit from."
		[/message] 
		[scroll_to]
			x,y=21,25
		[/scroll_to]
		[delay]
			time=200
		[/delay]
	[/event]


		############################################################
		### if the undead are about to loose they become support ###
		############################################################

	[event]
		name=die
		first_time_only=no
		[filter]
			[not]
				side=1,2
			[/not]
			[not]
				side=3
				canrecruit=yes
			[/not]
		[/filter]
		[if]
			[have_unit]
				side=3
				count=4
			[/have_unit]
			[and]
				[variable]
					name=reinforcements
					numerical_equals=0
				[/variable]
			[/and]
			[then]
				[kill]
					x,y=$x1,$y1
					animate=no
				[/kill]
				[delay]
					time=200
				[/delay]
				{LR_GENERIC_UNIT 4 (Dark Adept)      1 7}
				{LR_GENERIC_UNIT 4 (Skeleton)        2 7}
				{LR_GENERIC_UNIT 4 (Dark Adept)      3 8}
				{LR_GENERIC_UNIT 4 (Deathblade)      4 8}
				{LR_GENERIC_UNIT 4 (Skeleton)        4 7}
				{LR_GENERIC_UNIT 4 (Death Squire)    5 8}
				{LR_GENERIC_UNIT 4 (Skeleton Archer) 6 7}
#ifdef HARD
				{LR_GENERIC_UNIT 4 (Deathblade)      6 8}
				{LR_GENERIC_UNIT 4 (Skeleton)        7 7}
#endif
				[scroll_to]
					x,y=3,8
				[/scroll_to]
				[delay]
					time=1000
				[/delay]

				{NEAREST_UNIT 4 7 side=1 nearest_human1}

				[message]
					speaker=$nearest_human1.id
					message= _ "Reinforcements approach from the northwest ..."
				[/message]  
				[scroll_to]
					x,y=4,7
				[/scroll_to]
				[remove_shroud]
					x,y=4,7
					radius=4
					side=1
				[/remove_shroud]
				[message]
					speaker=$nearest_human1.id
					message= _ "...but not for us I fear!"
				[/message]
				{VARIABLE_OP reinforcements add 1}
				{CLEAR_VARIABLE nearest_human1}
			[/then]
		[/if]
	[/event]

	[event]
		name=die
		[filter]
			side=3
		[/filter]
		[filter_second]
			type=Swordsman
			side=1
		[/filter_second]
		[kill]
			x,y=$x1,$y1
			animate=yes
		[/kill]
		[message]
			speaker=second_unit
			message= _ "Die, and stay in your grave."
		[/message]
	[/event]

	[event]
		name=attack_end
		[filter]
			id="Antar"
		[/filter]
		[kill]
			x,y=$x2,$y2
			animate=yes
		[/kill]
		[delay]
			time=400
		[/delay]
		[message]
			speaker="Antar"
			message= _ "Who is their master? Who raised all this creatures?"
		[/message]
	[/event]

	[event]
		name=attack_end
		[filter]
			side=1
		[/filter]
		[filter_second]
			[not]
				type=Walking Corpse, Soulless, Dark Adept
			[/not]
		[/filter_second]
#		[kill]
#			x,y=$x2,$y2
#			animate=yes
#		[/kill]
		[delay]
			time=200
		[/delay]
		[message]
			speaker=unit
			message= _ "These are not only living dead, they are stronger and much more dangerous!"
		[/message]
	[/event]

	[event]
		name=recruit
		[filter]
			side=4
		[/filter]
		[message]
			speaker="Hegklad"
			message= _ "Kill them all!"
		[/message]
	[/event]

	[event]
		name=last breath
		[filter]
			id=Lord Veogwyn
		[/filter]
		[message]
			speaker=unit
			message= _ "Arghh...I am mortally wounded."
		[/message]
		[kill]
			id=Lord Veogwyn
			animate=yes
		[/kill]
		[message]
			speaker="Antar"
			message= _ "We have failed our mission!"
		[/message]
		{DEFEAT}
	[/event]

	[event]
		name=last breath
		[filter]
			id=Hadrador
		[/filter]
		[message]
			speaker=unit
			message= _ "Arghh...!"
		[/message]
		[message]
			speaker=second_unit
			message= _ "For the peace of this country!"
		[/message]
	[/event]

	[event]
		name=last breath
		[filter]
			id=Hegklad
		[/filter]
		[message]
			speaker=unit
			message= _ "Arghh...!"
		[/message]
		[kill]
			id=Hegklad
			animate=yes
		[/kill]
		[message]
			speaker="second_unit"
			message= _ "Die Witch-master!"
		[/message]
	[/event]

	[event]
		name=die
		[filter]
			id=Hadrador
		[/filter]
		[if]
			[have_unit]
				side=3,4
			[/have_unit]
			[then]
				[kill]
					type=Dark Adept
					side=3,4
					animate=no
				[/kill]
				[kill]
					side=3,4
					animate=yes
					[not]
						type=Dark Adept
					[/not]
					[not]
						id=Hadrador
					[/not]
				[/kill]
				{CHECK_UNDEAD_MESSAGE}
				{GET LOOSERS_GOLD}
			[/then]
		[/if]

		[if]
			[have_unit]
				id="Careonryn"
			[/have_unit]
			[then]
				[message]
					speaker="Careonryn"
					message= _ "We defeated the Undead, My Lord!"
				[/message]
			[/then]
			[else]
				[message]
					speaker="Gelphrad"
					message= _ "We defeated the Undead, My Lord!"
				[/message]
			[/else]
		[/if]
		[kill]
			x=32,31,31,33,33
			y= 5, 5, 4, 4, 5
			animate=no
			silent=yes
		[/kill]

		[store_villages]
			owner_side=3

			variable=side_3_villages
		[/store_villages]

		{FOREACH side_3_villages i}
		[capture_village]
			side=2
			x,y=$side_3_villages[$i].x,$side_3_villages[$i].y
		[/capture_village]
		{NEXT i}

		{FULL_HEAL id="Lord Veogwyn"}
		{FULL_HEAL id="Antar"}
		{FULL_HEAL id="Dagor"}
		{FULL_HEAL id="Gelphrad"}
		{FULL_HEAL id="Careonryn"}
		[redraw]
			side=1
		[/redraw]
		[if]
			[have_unit]
				id=Lord Veogwyn
				x,y=32,4
			[/have_unit]
			[else]
				{MOVE_UNIT id="Lord Veogwyn" 32 4}
			[/else]
		[/if]
		{MOVE_UNIT     id="Antar"    31 5}
		{TELEPORT_UNIT id="Dagor"     32 5}
		{TELEPORT_UNIT id="Careonryn" 31 4}
		[redraw]
			side=1
		[/redraw]
		[message]
			speaker="Lord Veogwyn"
			message= _ "Lord Antar, I am forever in your debt.

You came at the right time; the Undead would have annihilated us."
		[/message]
		[message]
			speaker="Antar"
			message= _ "You would have done the same for us."
		[/message]
		[message]
			speaker="Lord Veogwyn"
			message= _ "If you ever need my assistance, I will come and stand with you."
		[/message]
		[message]
			speaker=narrator
			message= _ "After pleasantries had been exchanged, they moved into serious discussion."
			image=wesnoth-icon.png
		[/message]
		[message]
			speaker="Antar"
			message= _ "My country was attacked by those Undead, before you called me in dire need."
		[/message]
		[message]
			speaker="Antar"
			message= _ "Did you receive a message from Lord Othar, our western neighbour.
He sent for relief, my father set off in aid."
		[/message]
		[message]
			speaker="Lord Veogwyn"
			message= _ "Only rumours... bad rumours..."
		[/message]
		[message]
			speaker="Antar"
			message= _ "I think we should find out if he is in need our of help."
		[/message]
		[message]
			speaker="Lord Veogwyn"
			message= _ "I can not go with you. I have to care for my people after this hard attack. We have lost many with more wounded."
		[/message]
		[message]
			speaker="Antar"
			message= _ "My men fare no better, but alas."
		[/message]
		[message]
			speaker="Lord Veogwyn"
			message= _ "I can not go until everything is settled here."
		[/message]
		[message]
			speaker="Lord Veogwyn"
			message= _ "I will send some of my heavy infantry with you.
That’s all I can do for now."
		[/message]
		[message]
			speaker=narrator
			message= _ "You can now recruit Heavy Infantrymen"
			image=wesnoth-icon.png
		[/message]
		[if]
			[variable]
				name=gelphrad_found
				equals=no
			[/variable]
			[then]
				[message]
					speaker="Lord Veogwyn"
					message= _ "*To Dagor*
Master Dagor,
we have a young man here who is ... 
I do not know how to say it,
but we think there is some kind of magic in him.

Here is the boy we`re talking about.
His name is <i>Gelphrad</i>."
				[/message]
				[unit]
					type=Ruffian
					id="Gelphrad"
					name="Gelphrad"
					side=2
					profile="portraits/Gelphrad_ruffian.png"
					unrenamable=yes
					x,y=33,5
					find_vacant=yes 
				[/unit]
				[message]
					speaker="Dagor"
					message= _ "This boy is unlike any other.
I can sense a kind of magic in this man-child.
And the magic is not trained... but it is extraordinary strong."
				[/message]
				[message]
					speaker="Dagor"
					message= _ "Come with me as my apprentice. I will teach you, and you will become a great magician, of that I am certain."
				[/message]
				[message]
					speaker="Antar"
					message= _ "Mages are rare in these days, we have to save the life of this young man."
				[/message]
				[message]
					speaker=narrator
					message=_ "Take care that Gelphrad becomes a mage. Save his life!"
					image=wesnoth-icon.png
				[/message]
				{MODIFY_UNIT (id=Gelphrad) side 1}
				{MAKE_HERO (Gelphrad) }
			[/then]
			[else]
				[message]
					speaker="Lord Veogwyn"
					message=_ "Take care that Gelphrad becomes a mage. Save his life!"
				[/message]
			[/else]
		[/if]
		[message]
			speaker="Lord Veogwyn"
			message= _ "Good luck, my friend."
		[/message]
		[message]
			speaker=narrator
			message= _ "Without further ado, Lord Antar was on the march again."
			image=wesnoth-icon.png
		[/message]

		[endlevel]
			result=victory
			bonus=yes
			{NEW_GOLD_CARRYOVER 40}
		[/endlevel]
	[/event]

	[event]
		name=time over
		[message]
			speaker="Antar"
			message= _ "We’re surrounded! I can see their reinforcements! All is lost!"
		[/message]
	[/event]

	[event]
		name=victory
		{CLEAR_SCENARIO_VARIABLES}
	[/event]

	{~add-ons/Antar/utils/utils.cfg}
	{~add-ons/Antar/utils/deaths.cfg}
[/scenario]


#undef FIRE_GELPHRAD
#undef INITIALIZE_SCENARIO_VARIABLES
#undef CLEAR_SCENARIO_VARIABLES
